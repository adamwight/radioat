#!/usr/bin/env

import datetime
import sys

import radio_program
import radio_station
import schedule_source
import times

if __name__ == "__main__":
    # TODO: usage
    url = sys.argv[1]
    title = sys.argv[2]
    cron = sys.argv[3]
    # FIXME: double-converting is crazy
    #hours = float(sys.argv[4])
    #seconds = 3600 * hours
    #duration = datetime.timedelta(seconds=seconds)
    duration = float(sys.argv[4])

    station = radio_station.RadioStation(url)
    times = times.Times(cron, duration)
    program = radio_program.RadioProgram(station=station, title=title, times=times)
    schedule_source.Schedule.add_recurring(program)
