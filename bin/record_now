#!/usr/bin/env python

import datetime
import sys

import archive_file
import radio_program
import radio_source
import radio_station

class RecordJob(object):
	def __init__(self, program, duration):
		output = archive_file.ArchiveFile(program)
		radio_source.RadioSource(program.station).record_to(output, duration)

if __name__ == "__main__":
	# TODO: usage
	url = sys.argv[1]
	title = sys.argv[2]
	hours = float(sys.argv[3])
	seconds = 3600 * hours
	duration = datetime.timedelta(seconds=seconds)

	station = radio_station.RadioStation(url)
	program = radio_program.RadioProgram(station=station, title=title)
	RecordJob(program, duration)
